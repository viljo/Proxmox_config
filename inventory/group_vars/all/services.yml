---
# Single Source of Truth for Infrastructure Services
# This file defines currently deployed and accessible services

infrastructure_services:

  # ==================================================================
  # DEPLOYED & WORKING - Services that are running and accessible
  # ==================================================================

  - name: Links Portal
    slug: links
    icon: "üîó"
    description: Service directory and landing page
    subdomain: links
    status: deployed_working
    note: "Public landing page, no authentication"

  - name: Jitsi Meet
    slug: meet
    icon: "üìπ"
    description: Video conferencing service
    subdomain: meet
    status: deployed_working
    note: "Directly accessible, uses own authentication"

  - name: Nextcloud
    slug: cloud
    icon: "‚òÅÔ∏è"
    description: Cloud file storage and synchronization
    subdomain: cloud
    status: deployed_working
    note: "Directly accessible, uses own authentication"

  - name: Jellyfin
    slug: media
    icon: "üé¨"
    description: Media streaming and management
    subdomain: media
    status: deployed_working
    note: "Directly accessible, uses own authentication"

  - name: qBittorrent
    slug: torrent
    icon: "‚¨áÔ∏è"
    description: BitTorrent client
    subdomain: torrent
    status: deployed_working
    note: "Directly accessible, uses own authentication"

  - name: Zipline
    slug: zipline
    icon: "üìé"
    description: File sharing service
    subdomain: zipline
    status: deployed_working
    note: "Directly accessible, uses own authentication"

  - name: Webtop
    slug: webtop
    icon: "üíª"
    description: Browser-based desktop environment
    subdomain: webtop
    status: deployed_working
    note: "Protected by OAuth2-Proxy (GitLab SSO)"

  - name: Mailhog
    slug: mail
    icon: "üìß"
    description: Email testing tool
    subdomain: mail
    status: deployed_working
    note: "Protected by OAuth2-Proxy (GitLab SSO)"

  - name: Open WebUI
    slug: llm
    icon: "ü§ñ"
    description: LLM web interface (connected to Ollama VM)
    subdomain: llm
    status: deployed_working
    note: "Protected by OAuth2-Proxy (GitLab SSO). API endpoints accessible with API key authentication. Connected to Ollama LLM VM (172.31.31.201:11434)"

  - name: GitLab CE
    slug: gitlab
    icon: "ü¶ä"
    description: Self-hosted GitLab instance
    subdomain: gitlab
    status: deployed_working
    note: "Self-hosted Git platform with CI/CD. SSH on port 2224. Runners serve both gitlab.com and local instance."

  - name: Fileshare
    slug: store
    icon: "üìÅ"
    description: File sharing with SFTP and web interface
    subdomain: store
    status: deployed_working
    note: "GitLab OAuth, SFTP on port 22, public/private file areas, API key access."

  - name: WireGuard VPN
    slug: vpn
    icon: "üîê"
    description: Emergency access VPN to all internal networks
    subdomain: vpn
    port: 51820/udp
    status: deployed_working
    note: "CRITICAL backup access. VPN server running on LXC 110 (192.168.1.110, 172.31.31.110 for Traefik). Web UI at https://vpn.viljo.se with GitLab OAuth. Provides access to 192.168.1.0/24 (management), 172.31.31.0/24 (containers), and 10.10.10.0/24 (VPN network). NAT configured for UDP port 51820."

# Infrastructure services (not exposed externally)
infrastructure_services_internal:
  - name: Ollama LLM
    type: vm
    vmid: 201
    icon: "ü§ñ"
    description: Ollama LLM inference server
    network: vmbr3 (172.31.31.0/24)
    ip: 172.31.31.201/24
    status: deployed_working
    note: "Running Ubuntu 24.04 with Ollama v0.13.0, accessible from Proxmox host, tested with qwen2.5:0.5b model"
