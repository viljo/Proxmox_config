# Zabbix Server Configuration
# Managed by Ansible - Do not edit manually

LogFile=/var/log/zabbix/zabbix_server.log
LogFileSize=0
PidFile=/run/zabbix/zabbix_server.pid

# Database configuration
DBHost={{ zabbix_db_host }}
DBName={{ zabbix_db_name }}
DBUser={{ zabbix_db_user }}
DBPassword={{ zabbix_db_password }}
DBPort={{ zabbix_db_port }}

# Network configuration
ListenIP={{ zabbix_listen_ip }}
ListenPort={{ zabbix_server_port }}

# Performance tuning
StartPollers=5
StartPollersUnreachable=1
StartTrappers=5
StartPingers=1
StartDiscoverers=1
StartHTTPPollers=1
StartTimers=1
StartEscalators=1
StartAlerters=3

# Housekeeping
HousekeepingFrequency={{ zabbix_housekeeping_frequency }}

# Cache sizes
CacheSize=128M
HistoryCacheSize=64M
HistoryIndexCacheSize=32M
TrendCacheSize=32M
ValueCacheSize=128M

# Timeout
Timeout=4

# Alerting
AlertScriptsPath=/usr/lib/zabbix/alertscripts
ExternalScripts=/usr/lib/zabbix/externalscripts

# Logging
LogSlowQueries=3000
StatsAllowedIP=127.0.0.1

# SNMP support
{% if zabbix_enable_snmp %}
StartSNMPTrapper=1
SNMPTrapperFile=/var/log/snmptrap/snmptrap.log
{% endif %}

# Server name (displayed in UI)
{% if zabbix_server_name %}
# ServerName={{ zabbix_server_name }}
{% endif %}
