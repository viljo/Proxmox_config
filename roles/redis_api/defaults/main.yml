---
# Redis Cache and Message Queue deployment via Proxmox API

# Container configuration
redis_container_id: 158
redis_hostname: "redis"
redis_template_file: "debian-13-standard_13.1-2_amd64.tar.zst"

# Resources
redis_cores: 2
redis_memory: 2048
redis_swap: 512
redis_disk: "20"
redis_rootfs_storage: "local-lvm"

# Network
redis_bridge: "vmbr3"
redis_ip_address: "172.16.10.158"
redis_netmask: "24"
redis_gateway: "172.16.10.101"
redis_dns_servers:
  - "1.1.1.1"
  - "8.8.8.8"

# Container settings
redis_unprivileged: true
redis_features: "nesting=0"

# Redis configuration
redis_port: 6379
redis_bind_address: "0.0.0.0"
redis_maxmemory: "1536mb"
redis_maxmemory_policy: "allkeys-lru"
redis_save_enabled: true
redis_save_intervals:
  - "900 1"    # Save after 900 sec (15 min) if at least 1 key changed
  - "300 10"   # Save after 300 sec (5 min) if at least 10 keys changed
  - "60 10000" # Save after 60 sec if at least 10000 keys changed

# Authentication
redis_requirepass: "{{ vault_redis_password }}"

# Passwords (from vault)
redis_root_password: "{{ vault_redis_root_password }}"
